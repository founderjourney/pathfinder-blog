---
title: "Caso de Estudio: Sophie Referrals - Sistema de Comisiones para Hostales"
excerpt: "Disenando un sistema de tracking de ventas de tours con gestion transparente de comisiones. Cuando las agencias pagan hasta 20% y los hostales no pueden verificar, la desconfianza crece."
date: "2024-12-13"
author: "Mauro | Pathfinders Labs"
category: "Case Study"
featuredImage: ""
---

## El Contexto

En el ecosistema de turismo de Latinoamerica, hay una relacion simbiotica poco conocida: las agencias de viajes ofrecen **hasta 20% de comision** a hostales y hoteles que recomiendan sus tours a los huespedes.

Suena como un win-win perfecto. En la practica, es un caos de desconfianza.

He visto hostales frustrados porque no tienen forma de saber cuantos de sus huespedes realmente compraron los tours que recomendaron. Las agencias dicen "vendimos 15 tours esta semana", pero el hostal no puede verificarlo. No hay forma de auditar. No hay transparencia.

**El resultado?** Hostales que dejan de recomendar tours porque no confian en que recibiron su comision justa.

**Sophie Referrals nacio para resolver esto.**

## La Propuesta de Valor

Un panel de gestion en tiempo real donde:

1. **Las agencias** registran sus tours y ofrecen comisiones a hostales
2. **Los hostales** obtienen links/QR codes unicos para cada tour
3. **Cada click y compra** se trackea en tiempo real - desde el primer click hasta la compra final
4. **100% transparencia** - el hostal ve exactamente cuantos huespedes clickearon, cuantos compraron, y cuanto le deben

No mas "confia en mi". Datos verificables.

## El Problema que Resuelve

### Sin Sophie Referrals:

```
Agencia: "Vendimos 20 tours este mes gracias a tu hostal"
Hostal: "Como lo se? No puedo verificarlo"
Agencia: "Confia en nosotros"
Hostal: *deja de recomendar tours*
```

### Con Sophie Referrals:

```
Dashboard del Hostal:
- Tour Cartagena Historica: 45 clicks, 12 compras, $240 en comisiones
- Tour Islas del Rosario: 78 clicks, 23 compras, $690 en comisiones
- Tour Volcan de Lodo: 32 clicks, 8 compras, $160 en comisiones

Total pendiente de cobro: $1,090
```

## Desafios de Diseno

### 1. El Sistema de Tracking

**El problema:** Como trackear el journey completo desde que el huesped ve la recomendacion hasta que compra el tour?

**Opciones evaluadas:**
- Cookies simples - Problema: se borran, no funcionan cross-device
- Codigos de descuento unicos - Problema: el huesped puede olvidar usarlo
- Links de afiliado tradicionales - Mejor, pero sin visibilidad del funnel completo

**La solucion:** QR codes dinamicos con tracking de eventos completo:

```javascript
// Tracking de eventos del funnel
const trackingEvents = {
  SCAN: 'qr_scanned',      // Huesped escanea QR en el hostal
  VIEW: 'tour_viewed',      // Ve la pagina del tour
  INQUIRY: 'inquiry_made',  // Hace una consulta
  PURCHASE: 'purchase_completed'  // Compra el tour
}

// Cada evento se registra con contexto
function trackEvent(eventType, context) {
  return {
    hostelId: context.hostel,
    agencyId: context.agency,
    tourId: context.tour,
    guestFingerprint: context.fingerprint,
    timestamp: Date.now(),
    eventType
  }
}
```

### 2. Estructuras de Comision Flexibles

Cada agencia tiene diferentes acuerdos con diferentes hostales. Algunas pagan 15% fijo. Otras tienen escalonados (20% si vendes mas de 10 tours/mes). Algunas tienen bonos por volumen.

**El problema:** Como modelar esta variabilidad sin crear un sistema imposible de mantener?

**La solucion:** Un sistema de reglas basado en JSON Schema:

```javascript
const commissionRule = {
  type: 'tiered',
  tiers: [
    { min: 0, max: 10, rate: 0.15 },   // 15% hasta 10 ventas
    { min: 11, max: 30, rate: 0.18 },  // 18% de 11 a 30
    { min: 31, max: null, rate: 0.20 } // 20% para 31+
  ],
  bonuses: [
    { threshold: 50, bonus: 100 } // $100 extra si llegas a 50 ventas
  ],
  paymentTerms: 'monthly',
  currency: 'USD'
}
```

Un engine de calculo interpreta estas reglas, permitiendo configuraciones personalizadas sin cambiar codigo.

### 3. El Dashboard Dual

**El problema:** Tanto el hostal como la agencia necesitan ver informacion - pero no la misma informacion. Y ambos deben confiar en que los numeros son reales.

**La solucion:** Un solo source of truth con vistas especificas:

- **Vista Hostal:** Todos los tours que promociona, clicks, conversiones, comisiones pendientes, historial de pagos
- **Vista Agencia:** Todos los hostales afiliados, ventas por hostal, comisiones pagadas/pendientes
- **Mecanismo de auditoria:** Cada transaccion tiene un hash verificable. Si el hostal duda, puede verificar cada venta individualmente.

## Stack Tecnologico

| Categoria | Tecnologia |
|-----------|------------|
| Frontend | React 18 + TypeScript |
| Build | Vite |
| Styling | Tailwind CSS |
| QR Generation | qrcode.js |
| Analytics | Custom event tracking |

## Por Que Esta en Pause

Sophie Referrals llego a MVP funcional. La landing esta lista, el sistema de tracking funciona, el calculo de comisiones esta implementado.

Pero durante la validacion, descubri algo importante: **el problema existia, pero la urgencia de resolverlo no era suficiente.**

Los hostales habian desarrollado workarounds. Algunos simplemente dejaron de recomendar tours. Otros negociaron pagos fijos mensuales independiente de ventas. El dolor era real, pero la solucion requeria que AMBAS partes (agencia Y hostal) adoptaran el sistema.

**Two-sided marketplace problem:** Necesitas hostales para atraer agencias, y agencias para atraer hostales.

### Lecciones de la Pausa

1. **Problema â‰  Mercado** - Que exista un problema no significa que haya un mercado dispuesto a pagar por resolverlo

2. **Two-sided marketplaces son dificiles** - Requieren masa critica en ambos lados simultaneamente

3. **Pausar no es fallar** - El codigo esta escrito, los sistemas disenados. Cuando el mercado este listo, puedo reactivar en semanas

## Que Haria Diferente

Si empezara hoy:

1. **Empezar con UN lado** - Quiza solo el panel para hostales, con integracion manual de agencias. Resolver para uno primero.

2. **Encontrar una agencia grande** - Conseguir que una agencia con 50+ hostales afiliados adopte el sistema. Eso bootstrapea el otro lado.

3. **Cobrar desde el MVP** - "Si no pagan, no validan" - el dinero es la unica validacion real

## El Valor del Proyecto

Aunque Sophie esta en pause, el proyecto no fue tiempo perdido:

- El sistema de tracking de eventos lo reutilice en otros proyectos
- El engine de comisiones escalonadas lo adapte para HostelOS
- Las lecciones de validacion de two-sided marketplaces me ahorraron meses en otros proyectos

**A veces, un proyecto "pausado" es el mejor curso de Product Management que puedes tomar.**

---

*Sophie Referrals esta en stand-by, pero el codigo y los learnings siguen vivos. Si eres una agencia de tours grande buscando transparentar comisiones con tus hostales afiliados, [hablemos](/contacto).*
